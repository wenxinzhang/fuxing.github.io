<!DOCTYPE HTML>
<html lang="zh-CN">

<head><meta name="generator" content="Hexo 3.9.0">
    <!--Setting-->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta http-equiv="Cache-Control" content="no-siteapp">
    <meta http-equiv="Cache-Control" content="no-transform">
    <meta name="renderer" content="webkit|ie-comp|ie-stand">
    <meta name="apple-mobile-web-app-capable" content="福星">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="format-detection" content="telephone=no,email=no,adress=no">
    <meta name="browsermode" content="application">
    <meta name="screen-orientation" content="portrait">
    <meta name="theme-version" content="1.2.3">
    <meta name="root" content="/">
    <link rel="dns-prefetch" href="http://zhangfuxin.cn">
    <!--SEO-->

<meta name="keywords" content="Hive">


<meta name="description" content="** Hive学习之路 （七）Hive的DDL操作：** &lt;Excerpt in index | 首页摘要&gt;
​        Hive学习之路 （七）Hive的DDL操作

&lt...">


<meta name="robots" content="all">
<meta name="google" content="all">
<meta name="googlebot" content="all">
<meta name="verify" content="all">
    <!--Title-->

<title>
    
    Hive学习之路 （七）Hive的DDL操作 |
    
    福星
</title>

<link rel="alternate" href="/atom.xml" title="福星" type="application/atom+xml">


<link rel="icon" href="/favicon.ico">

    

<link rel="stylesheet" href="/css/bootstrap.min.css?rev=3.3.7">
<link rel="stylesheet" href="/css/font-awesome.min.css?rev=4.7.0">
<link rel="stylesheet" href="/css/style.css?rev=@@hash">
    
<div class="hide">
    <script type="text/javascript">
    var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");
    document.write(unescape("%3Cspan class='cnzz_stat_icon_1263868967 hide' %3E%3Cscript%20src%3D%22https%3A%2F%2Fs95.cnzz.com%2Fz_stat.php%3Fweb_id%3D1272564536%22%3E%3C%2Fscript%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s19.cnzz.com/z_stat.php%3Fid%3D1263868967%26show%3Dpic1' type='text/javascript'%3E%3C/script%3E"));
    </script>
</div>




    

<script>
(function() {
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
    } else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>

</head></html>
<!--[if lte IE 8]>
<style>
    html{ font-size: 1em }
</style>
<![endif]-->
<!--[if lte IE 9]>
<div style="ie">你使用的浏览器版本过低，为了你更好的阅读体验，请更新浏览器的版本或者使用其他现代浏览器，比如Chrome、Firefox、Safari等。</div>
<![endif]-->
<body>
    <header class="main-header"  style="background-image:url(
    http://snippet.shenliyang.com/img/banner.jpg)"
     >
    <div class="main-header-box">
        <a class="header-avatar" href="/" title='福 星'>
            <img src="/img/avatar.jpg" alt="logo头像" class="img-responsive center-block">
        </a>
        <div class="branding">
            <!--<h2 class="text-hide">Snippet主题,从未如此简单有趣</h2>-->
            
            <img src="/img/branding.png" alt="Snippet 博客主题" class="img-responsive center-block">
            
        </div>
    </div>
</header>
    <nav class="main-navigation">
    <div class="container">
        <div class="row">
            <div class="col-sm-12">
                <div class="navbar-header"><span class="nav-toggle-button collapsed pull-right" data-toggle="collapse" data-target="#main-menu" id="mnav">
                        <span class="sr-only"></span>
                        <i class="fa fa-bars"></i>
                    </span>
                    <a class="navbar-brand" href="http://zhangfuxin.cn">
                        福星</a>
                </div>
                <div class="collapse navbar-collapse" id="main-menu">
                    <ul class="menu">
                        
                        <li role="presentation" class="text-center">
                            <a href="/"><i class="fa "></i>
                                首页</a>
                        </li>
                        
                        <li role="presentation" class="text-center">
                            <a href="/categories/Linux/"><i class="fa "></i>
                                Linux</a>
                        </li>
                        
                        <li role="presentation" class="text-center">
                            <a href="/categories/Hadoop/"><i class="fa "></i>
                                Hadoop</a>
                        </li>
                        
                        <li role="presentation" class="text-center">
                            <a href="/categories/Spark/"><i class="fa "></i>
                                Spark</a>
                        </li>
                        
                        <li role="presentation" class="text-center">
                            <a href="/categories/Java/"><i class="fa "></i>
                                Java</a>
                        </li>
                        
                        <li role="presentation" class="text-center">
                            <a href="/categories/Python/"><i class="fa "></i>
                                Python</a>
                        </li>
                        
                        <li role="presentation" class="text-center">
                            <a href="/categories/algorithm/"><i class="fa "></i>
                                算法</a>
                        </li>
                        
                        <li role="presentation" class="text-center">
                            <a href="/categories/工具/"><i class="fa "></i>
                                工具</a>
                        </li>
                        
                        <li role="presentation" class="text-center">
                            <a href="/archives/"><i class="fa "></i>
                                时间轴</a>
                        </li>
                        
                    </ul>
                </div>
            </div>
        </div>
    </div>
</nav>
    <section class="content-wrap">
        <div class="container">
            <div class="row">
                <main class="col-md-8 main-content m-post">
                    <p id="process"></p>
<article class="post">
    <div class="post-head">
        <h1 id="Hive学习之路 （七）Hive的DDL操作">
            
            Hive学习之路 （七）Hive的DDL操作
            
        </h1>
        <div class="post-meta">
    
    <span class="categories-meta fa-wrap">
        <i class="fa fa-folder-open-o"></i>
        <a class="category-link" href="/categories/Hadoop/">Hadoop</a>
    </span>
    
    
    <span class="fa-wrap">
        <i class="fa fa-tags"></i>
        <span class="tags-meta">
            
            <a class="tag-link" href="/tags/Hive/">Hive</a>
            
        </span>
    </span>
    
    
    
    <span class="fa-wrap">
        <i class="fa fa-clock-o"></i>
        <span class="date-meta">
            2019/04/07</span>
    </span>
    
    <span class="fa-wrap">
        <i class="fa fa-eye"></i>
        <span id="busuanzi_value_page_pv"></span>
    </span>
    
    
</div>
        
        
    </div>
    
    <div class="post-body post-content">
        <p>** Hive学习之路 （七）Hive的DDL操作：** &lt;Excerpt in index | 首页摘要&gt;</p>
<p>​        Hive学习之路 （七）Hive的DDL操作</p>
<a id="more"></a>
<p>&lt;The rest of contents | 余下全文&gt;</p>
<h1 id="库操作"><a href="#库操作" class="headerlink" title="库操作"></a>库操作</h1><h2 id="1、创建库"><a href="#1、创建库" class="headerlink" title="1、创建库"></a>1、创建库</h2><h3 id="语法结构"><a href="#语法结构" class="headerlink" title="语法结构"></a>语法结构</h3><blockquote>
<p>CREATE (DATABASE|SCHEMA) [IF NOT EXISTS] database_name</p>
<p>　　[COMMENT database_comment]　　　　　　//关于数据块的描述</p>
<p>　　[LOCATION hdfs_path]　　　　　　　　　　//指定数据库在HDFS上的存储位置</p>
<p>　　[WITH DBPROPERTIES (property_name=property_value, …)];　　　　//指定数据块属性</p>
</blockquote>
<p>　　默认地址：/user/hive/warehouse/db_name.db/table_name/partition_name/…</p>
<h3 id="创建库的方式"><a href="#创建库的方式" class="headerlink" title="创建库的方式"></a>创建库的方式</h3><h4 id="（1）创建普通的数据库"><a href="#（1）创建普通的数据库" class="headerlink" title="（1）创建普通的数据库"></a>（1）创建普通的数据库</h4><p><a href="javascript:void(0);" target="_blank" rel="noopener"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">0: jdbc:hive2://hadoop3:10000&gt; create database t1;</span><br><span class="line">No rows affected (0.308 seconds)</span><br><span class="line">0: jdbc:hive2://hadoop3:10000&gt; show databases;</span><br><span class="line">+<span class="comment">----------------+</span></span><br><span class="line">| database_name  |</span><br><span class="line">+<span class="comment">----------------+</span></span><br><span class="line">| default        |</span><br><span class="line">| myhive         |</span><br><span class="line">| t1             |</span><br><span class="line">+<span class="comment">----------------+</span></span><br><span class="line">3 rows selected (0.393 seconds)</span><br><span class="line">0: jdbc:hive2://hadoop3:10000&gt;</span><br></pre></td></tr></table></figure>

<h4 id="（2）创建库的时候检查存与否"><a href="#（2）创建库的时候检查存与否" class="headerlink" title="（2）创建库的时候检查存与否"></a>（2）创建库的时候检查存与否</h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">0: jdbc:hive2://hadoop3:10000&gt; create database if not exists t1;</span><br><span class="line">No rows affected (0.176 seconds)</span><br><span class="line">0: jdbc:hive2://hadoop3:10000&gt;</span><br></pre></td></tr></table></figure>

<h4 id="（3）创建库的时候带注释"><a href="#（3）创建库的时候带注释" class="headerlink" title="（3）创建库的时候带注释"></a>（3）创建库的时候带注释</h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">0: jdbc:hive2://hadoop3:10000&gt; create database if not exists t2 comment 'learning hive';</span><br><span class="line">No rows affected (0.217 seconds)</span><br><span class="line">0: jdbc:hive2://hadoop3:10000&gt;</span><br></pre></td></tr></table></figure>

<p><img src="https://images2018.cnblogs.com/blog/1228818/201804/1228818-20180405151447453-54696878.png" alt="img"></p>
<h4 id="（4）创建带属性的库"><a href="#（4）创建带属性的库" class="headerlink" title="（4）创建带属性的库"></a>（4）创建带属性的库</h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">0: jdbc:hive2://hadoop3:10000&gt; create database if not exists t3 with dbproperties('creator'='hadoop','date'='2018-04-05');</span><br><span class="line">No rows affected (0.255 seconds)</span><br><span class="line">0: jdbc:hive2://hadoop3:10000&gt;</span><br></pre></td></tr></table></figure>

<h2 id="2、查看库"><a href="#2、查看库" class="headerlink" title="2、查看库"></a>2、查看库</h2><h3 id="查看库的方式"><a href="#查看库的方式" class="headerlink" title="查看库的方式"></a>查看库的方式</h3><h4 id="（1）查看有哪些数据库"><a href="#（1）查看有哪些数据库" class="headerlink" title="（1）查看有哪些数据库"></a>（1）查看有哪些数据库</h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">0: jdbc:hive2://hadoop3:10000&gt; show databases;</span><br><span class="line">+<span class="comment">----------------+</span></span><br><span class="line">| database_name |</span><br><span class="line">+<span class="comment">----------------+</span></span><br><span class="line">| default |</span><br><span class="line">| myhive |</span><br><span class="line">| t1 |</span><br><span class="line">| t2 |</span><br><span class="line">| t3 |</span><br><span class="line">+<span class="comment">----------------+</span></span><br><span class="line">5 rows selected (0.164 seconds)</span><br><span class="line">0: jdbc:hive2://hadoop3:10000&gt;</span><br></pre></td></tr></table></figure>



<p><img src="https://images2018.cnblogs.com/blog/1228818/201804/1228818-20180405152147476-1818091794.png" alt="img"></p>
<h4 id="（2）显示数据库的详细属性信息"><a href="#（2）显示数据库的详细属性信息" class="headerlink" title="（2）显示数据库的详细属性信息"></a>（2）显示数据库的详细属性信息</h4><p>语法</p>
<blockquote>
<p>desc database [extended] dbname;</p>
</blockquote>
<p>示例</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">0: jdbc:hive2://hadoop3:10000&gt; desc database extended t3;</span><br><span class="line">+<span class="comment">----------+----------+------------------------------------------+-------------+-------------+------------------------------------+</span></span><br><span class="line">| db_name  | <span class="keyword">comment</span>  |                 location                 | owner_name  | owner_type  |             <span class="keyword">parameters</span>             |</span><br><span class="line">+<span class="comment">----------+----------+------------------------------------------+-------------+-------------+------------------------------------+</span></span><br><span class="line">| t3       |          | hdfs://myha01/<span class="keyword">user</span>/hive/warehouse/t3.db  | hadoop      | <span class="keyword">USER</span>        | &#123;<span class="built_in">date</span>=<span class="number">2018</span><span class="number">-04</span><span class="number">-05</span>, creator=hadoop&#125;  |</span><br><span class="line">+<span class="comment">----------+----------+------------------------------------------+-------------+-------------+------------------------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="keyword">row</span> selected (<span class="number">0.11</span> <span class="keyword">seconds</span>)</span><br><span class="line"><span class="number">0</span>: jdbc:hive2://hadoop3:<span class="number">10000</span>&gt;</span><br></pre></td></tr></table></figure>



<p><img src="https://images2018.cnblogs.com/blog/1228818/201804/1228818-20180405152346031-867635387.png" alt="img"></p>
<h4 id="（3）查看正在使用哪个库"><a href="#（3）查看正在使用哪个库" class="headerlink" title="（3）查看正在使用哪个库"></a>（3）查看正在使用哪个库</h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">0: jdbc:hive2://hadoop3:10000&gt; select current_database();</span><br><span class="line">+<span class="comment">----------+</span></span><br><span class="line">|   _c0    |</span><br><span class="line">+<span class="comment">----------+</span></span><br><span class="line">| default  |</span><br><span class="line">+<span class="comment">----------+</span></span><br><span class="line">1 row selected (1.36 seconds)</span><br><span class="line">0: jdbc:hive2://hadoop3:10000&gt;</span><br></pre></td></tr></table></figure>



<p><img src="https://images2018.cnblogs.com/blog/1228818/201804/1228818-20180405152511882-533323414.png" alt="img"></p>
<h4 id="（4）查看创建库的详细语句"><a href="#（4）查看创建库的详细语句" class="headerlink" title="（4）查看创建库的详细语句"></a>（4）查看创建库的详细语句</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">0: jdbc:hive2://hadoop3:10000&gt; show create database t3;</span><br><span class="line">+<span class="comment">----------------------------------------------+</span></span><br><span class="line">|                createdb_stmt                 |</span><br><span class="line">+<span class="comment">----------------------------------------------+</span></span><br><span class="line">| <span class="keyword">CREATE</span> <span class="keyword">DATABASE</span> <span class="string">`t3`</span>                         |</span><br><span class="line">| LOCATION                                     |</span><br><span class="line">|   <span class="string">'hdfs://myha01/user/hive/warehouse/t3.db'</span>  |</span><br><span class="line">| <span class="keyword">WITH</span> DBPROPERTIES (                          |</span><br><span class="line">|   <span class="string">'creator'</span>=<span class="string">'hadoop'</span>,                        |</span><br><span class="line">|   <span class="string">'date'</span>=<span class="string">'2018-04-05'</span>)                       |</span><br><span class="line">+<span class="comment">----------------------------------------------+</span></span><br><span class="line"><span class="number">6</span> <span class="keyword">rows</span> selected (<span class="number">0.155</span> <span class="keyword">seconds</span>)</span><br><span class="line"><span class="number">0</span>: jdbc:hive2://hadoop3:<span class="number">10000</span>&gt;</span><br></pre></td></tr></table></figure>

<p><img src="https://images2018.cnblogs.com/blog/1228818/201804/1228818-20180405152613117-1681533126.png" alt="img"></p>
<h2 id="3、删除库"><a href="#3、删除库" class="headerlink" title="3、删除库"></a>3、删除库</h2><h3 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h3><p>删除库操作</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">drop database dbname;</span><br><span class="line">drop database if exists dbname;</span><br></pre></td></tr></table></figure>

<p>默认情况下，hive 不允许删除包含表的数据库，有两种解决办法：</p>
<p>1、 手动删除库下所有表，然后删除库</p>
<p>2、 使用 cascade 关键字</p>
<blockquote>
<p><strong>drop database if exists dbname cascade;</strong></p>
<p>默认情况下就是 restrict drop database if exists myhive ==== drop database if exists myhive restrict</p>
</blockquote>
<h3 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h3><h4 id="（1）删除不含表的数据库"><a href="#（1）删除不含表的数据库" class="headerlink" title="（1）删除不含表的数据库"></a>（1）删除不含表的数据库</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">0: jdbc:hive2://hadoop3:10000&gt; show tables in t1;</span><br><span class="line">+-----------+</span><br><span class="line">| tab_name  |</span><br><span class="line">+-----------+</span><br><span class="line">+-----------+</span><br><span class="line">No rows selected (0.147 seconds)</span><br><span class="line">0: jdbc:hive2://hadoop3:10000&gt; drop database t1;</span><br><span class="line">No rows affected (0.178 seconds)</span><br><span class="line">0: jdbc:hive2://hadoop3:10000&gt; show databases;</span><br><span class="line">+----------------+</span><br><span class="line">| database_name  |</span><br><span class="line">+----------------+</span><br><span class="line">| default        |</span><br><span class="line">| myhive         |</span><br><span class="line">| t2             |</span><br><span class="line">| t3             |</span><br><span class="line">+----------------+</span><br><span class="line">4 rows selected (0.124 seconds)</span><br><span class="line">0: jdbc:hive2://hadoop3:10000&gt;</span><br></pre></td></tr></table></figure>

<p><img src="https://images2018.cnblogs.com/blog/1228818/201804/1228818-20180405153207185-1206431168.png" alt="img"></p>
<h4 id="（2）删除含有表的数据库"><a href="#（2）删除含有表的数据库" class="headerlink" title="（2）删除含有表的数据库"></a>（2）删除含有表的数据库</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">0: jdbc:hive2://hadoop3:10000&gt; drop database if exists t3 cascade;</span><br><span class="line">No rows affected (1.56 seconds)</span><br><span class="line">0: jdbc:hive2://hadoop3:10000&gt;</span><br></pre></td></tr></table></figure>

<p><img src="https://images2018.cnblogs.com/blog/1228818/201804/1228818-20180405153816995-802101520.png" alt="img"></p>
<h2 id="4、切换库"><a href="#4、切换库" class="headerlink" title="4、切换库"></a>4、切换库</h2><h3 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h3><blockquote>
<p>use database_name</p>
</blockquote>
<h3 id="示例-1"><a href="#示例-1" class="headerlink" title="示例"></a>示例</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">0: jdbc:hive2://hadoop3:10000&gt; use t2;</span><br><span class="line">No rows affected (0.109 seconds)</span><br><span class="line">0: jdbc:hive2://hadoop3:10000&gt;</span><br></pre></td></tr></table></figure>

<p><img src="https://images2018.cnblogs.com/blog/1228818/201804/1228818-20180405154024694-578835712.png" alt="img"></p>
<h1 id="表操作"><a href="#表操作" class="headerlink" title="表操作"></a>表操作</h1><h2 id="1、创建表"><a href="#1、创建表" class="headerlink" title="1、创建表"></a>1、创建表</h2><h3 id="语法-1"><a href="#语法-1" class="headerlink" title="语法"></a>语法</h3><blockquote>
<p><strong>CREATE</strong> [EXTERNAL] <strong>TABLE</strong> [IF NOT EXISTS] table_name</p>
<p>　　[(col_name data_type [COMMENT col_comment], …)]</p>
<p>　　[<strong>COMMENT</strong> table_comment]</p>
<p>　　[<strong>PARTITIONED BY</strong> (col_name data_type [COMMENT col_comment], …)]</p>
<p>　　[<strong>CLUSTERED BY</strong> (col_name, col_name, …)</p>
<p>　　　　[<strong>SORTED BY</strong> (col_name [ASC|DESC], …)] <strong>INTO</strong> num_buckets <strong>BUCKETS</strong>]</p>
<p>　　[<strong>ROW FORMAT</strong> row_format]</p>
<p>　　[<strong>STORED AS</strong> file_format]</p>
<p>　　[<strong>LOCATION</strong> hdfs_path]</p>
</blockquote>
<p>详情请参见： <a href="https://cwiki.apache.org/confluence/display/Hive/LanguageManual+DDL#LanguageManualD" target="_blank" rel="noopener">https://cwiki.apache.org/confluence/display/Hive/LanguageManual+DDL#LanguageManualD</a> DL-CreateTable</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">•CREATE TABLE 创建一个指定名字的表。如果相同名字的表已经存在，则抛出异常；用户可以用 IF NOT EXIST 选项来忽略这个异常</span><br><span class="line">•EXTERNAL 关键字可以让用户创建一个外部表，在建表的同时指定一个指向实际数据的路径（LOCATION）</span><br><span class="line">•LIKE 允许用户复制现有的表结构，但是不复制数据</span><br><span class="line">•COMMENT可以为表与字段增加描述</span><br><span class="line">•PARTITIONED BY 指定分区•ROW FORMAT 　　DELIMITED [FIELDS TERMINATED BY char] [COLLECTION ITEMS TERMINATED BY char] 　　　　MAP KEYS TERMINATED BY char] [LINES TERMINATED BY char] 　　　　| SERDE serde_name [WITH SERDEPROPERTIES 　　　　(property_name=property_value, property_name=property_value, ...)] 　　用户在建表的时候可以自定义 SerDe 或者使用自带的 SerDe。如果没有指定 ROW FORMAT 或者 ROW FORMAT DELIMITED，将会使用自带的 SerDe。在建表的时候，用户还需要为表指定列，用户在指定表的列的同时也会指定自定义的 SerDe，Hive 通过 SerDe 确定表的具体的列的数据。 •STORED AS 　　SEQUENCEFILE //序列化文件　　| TEXTFILE //普通的文本文件格式　　| RCFILE　　//行列存储相结合的文件　　| INPUTFORMAT input_format_classname OUTPUTFORMAT output_format_classname //自定义文件格式　　如果文件数据是纯文本，可以使用 STORED AS TEXTFILE。如果数据需要压缩，使用 STORED AS SEQUENCE 。</span><br><span class="line">•LOCATION指定表在HDFS的存储路径</span><br></pre></td></tr></table></figure>

<p>最佳实践：<br>　　如果一份数据已经存储在HDFS上，并且要被多个用户或者客户端使用，最好创建外部表<br>　　反之，最好创建内部表。</p>
<p>　　如果不指定，就按照默认的规则存储在默认的仓库路径中。</p>
<h3 id="示例-2"><a href="#示例-2" class="headerlink" title="示例"></a>示例</h3><p>使用t2数据库进行操作</p>
<h4 id="（1）创建默认的内部表"><a href="#（1）创建默认的内部表" class="headerlink" title="（1）创建默认的内部表"></a>（1）创建默认的内部表</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">0: jdbc:hive2://hadoop3:10000&gt; create table student(id int, name string, sex string, age int,department string) row format delimited fields terminated by ",";</span><br><span class="line">No rows affected (0.222 seconds)</span><br><span class="line">0: jdbc:hive2://hadoop3:10000&gt; desc student;</span><br><span class="line">+<span class="comment">-------------+------------+----------+</span></span><br><span class="line">|  col_name   | data_type  | <span class="keyword">comment</span>  |</span><br><span class="line">+<span class="comment">-------------+------------+----------+</span></span><br><span class="line">| <span class="keyword">id</span>          | <span class="built_in">int</span>        |          |</span><br><span class="line">| <span class="keyword">name</span>        | <span class="keyword">string</span>     |          |</span><br><span class="line">| sex         | <span class="keyword">string</span>     |          |</span><br><span class="line">| age         | <span class="built_in">int</span>        |          |</span><br><span class="line">| department  | <span class="keyword">string</span>     |          |</span><br><span class="line">+<span class="comment">-------------+------------+----------+</span></span><br><span class="line"><span class="number">5</span> <span class="keyword">rows</span> selected (<span class="number">0.168</span> <span class="keyword">seconds</span>)</span><br><span class="line"><span class="number">0</span>: jdbc:hive2://hadoop3:<span class="number">10000</span>&gt;</span><br></pre></td></tr></table></figure>

<p><img src="https://images2018.cnblogs.com/blog/1228818/201804/1228818-20180405160259794-1130927260.png" alt="img"></p>
<h4 id="（2）外部表"><a href="#（2）外部表" class="headerlink" title="（2）外部表"></a>（2）外部表</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">0: jdbc:hive2://hadoop3:10000&gt; create external table student_ext(id int, name string, sex string, age int,department string) row format delimited fields terminated by &quot;,&quot; location &quot;/hive/student&quot;;</span><br><span class="line">No rows affected (0.248 seconds)</span><br><span class="line">0: jdbc:hive2://hadoop3:10000&gt;</span><br></pre></td></tr></table></figure>

<h4 id="（3）分区表"><a href="#（3）分区表" class="headerlink" title="（3）分区表"></a>（3）分区表</h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">0: jdbc:hive2://hadoop3:10000&gt; create external table student_ptn(id int, name string, sex string, age int,department string)</span><br><span class="line">. . . . . . . . . . . . . . .&gt; partitioned by (city string)</span><br><span class="line">. . . . . . . . . . . . . . .&gt; row format delimited fields terminated by ","</span><br><span class="line">. . . . . . . . . . . . . . .&gt; location "/hive/student_ptn";</span><br><span class="line">No rows affected (0.24 seconds)</span><br><span class="line">0: jdbc:hive2://hadoop3:10000&gt;</span><br></pre></td></tr></table></figure>

<p>添加分区</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">0: jdbc:hive2://hadoop3:10000&gt; alter table student_ptn add partition(city=&quot;beijing&quot;);</span><br><span class="line">No rows affected (0.269 seconds)</span><br><span class="line">0: jdbc:hive2://hadoop3:10000&gt; alter table student_ptn add partition(city=&quot;shenzhen&quot;);</span><br><span class="line">No rows affected (0.236 seconds)</span><br><span class="line">0: jdbc:hive2://hadoop3:10000&gt;</span><br></pre></td></tr></table></figure>

<p>如果某张表是分区表。那么每个分区的定义，其实就表现为了这张表的数据存储目录下的一个子目录<br>如果是分区表。那么数据文件一定要存储在某个分区中，而不能直接存储在表中。</p>
<h4 id="（4）分桶表"><a href="#（4）分桶表" class="headerlink" title="（4）分桶表"></a>（4）分桶表</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">0: jdbc:hive2://hadoop3:10000&gt; create external table student_bck(id int, name string, sex string, age int,department string)</span><br><span class="line">. . . . . . . . . . . . . . .&gt; clustered by (id) sorted by (id asc, name desc) into 4 buckets</span><br><span class="line">. . . . . . . . . . . . . . .&gt; row format delimited fields terminated by &quot;,&quot;</span><br><span class="line">. . . . . . . . . . . . . . .&gt; location &quot;/hive/student_bck&quot;;</span><br><span class="line">No rows affected (0.216 seconds)</span><br><span class="line">0: jdbc:hive2://hadoop3:10000&gt;</span><br></pre></td></tr></table></figure>

<h4 id="（5）使用CTAS创建表"><a href="#（5）使用CTAS创建表" class="headerlink" title="（5）使用CTAS创建表"></a>（5）使用CTAS创建表</h4><p>作用： 就是从一个查询SQL的结果来创建一个表进行存储</p>
<p>现象student表中导入数据</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">0: jdbc:hive2://hadoop3:10000&gt; load data local inpath &quot;/home/hadoop/student.txt&quot; into table student;</span><br><span class="line">No rows affected (0.715 seconds)</span><br><span class="line">0: jdbc:hive2://hadoop3:10000&gt; select * from student;</span><br><span class="line">+-------------+---------------+--------------+--------------+---------------------+</span><br><span class="line">| student.id  | student.name  | student.sex  | student.age  | student.department  |</span><br><span class="line">+-------------+---------------+--------------+--------------+---------------------+</span><br><span class="line">| 95002       | 刘晨            | 女            | 19           | IS                  |</span><br><span class="line">| 95017       | 王风娟           | 女            | 18           | IS                  |</span><br><span class="line">| 95018       | 王一            | 女            | 19           | IS                  |</span><br><span class="line">| 95013       | 冯伟            | 男            | 21           | CS                  |</span><br><span class="line">| 95014       | 王小丽           | 女            | 19           | CS                  |</span><br><span class="line">| 95019       | 邢小丽           | 女            | 19           | IS                  |</span><br><span class="line">| 95020       | 赵钱            | 男            | 21           | IS                  |</span><br><span class="line">| 95003       | 王敏            | 女            | 22           | MA                  |</span><br><span class="line">| 95004       | 张立            | 男            | 19           | IS                  |</span><br><span class="line">| 95012       | 孙花            | 女            | 20           | CS                  |</span><br><span class="line">| 95010       | 孔小涛           | 男            | 19           | CS                  |</span><br><span class="line">| 95005       | 刘刚            | 男            | 18           | MA                  |</span><br><span class="line">| 95006       | 孙庆            | 男            | 23           | CS                  |</span><br><span class="line">| 95007       | 易思玲           | 女            | 19           | MA                  |</span><br><span class="line">| 95008       | 李娜            | 女            | 18           | CS                  |</span><br><span class="line">| 95021       | 周二            | 男            | 17           | MA                  |</span><br><span class="line">| 95022       | 郑明            | 男            | 20           | MA                  |</span><br><span class="line">| 95001       | 李勇            | 男            | 20           | CS                  |</span><br><span class="line">| 95011       | 包小柏           | 男            | 18           | MA                  |</span><br><span class="line">| 95009       | 梦圆圆           | 女            | 18           | MA                  |</span><br><span class="line">| 95015       | 王君            | 男            | 18           | MA                  |</span><br><span class="line">+-------------+---------------+--------------+--------------+---------------------+</span><br><span class="line">21 rows selected (0.342 seconds)</span><br><span class="line">0: jdbc:hive2://hadoop3:10000&gt;</span><br></pre></td></tr></table></figure>

<p>使用CTAS创建表</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">0: jdbc:hive2://hadoop3:10000&gt; create table student_ctas as select * from student where id &lt; 95012;</span><br><span class="line">WARNING: Hive-on-MR is deprecated in Hive 2 and may not be available in the future versions. Consider using a different execution engine (i.e. spark, tez) or using Hive 1.X releases.</span><br><span class="line">No rows affected (34.514 seconds)</span><br><span class="line">0: jdbc:hive2://hadoop3:10000&gt; select * from student_ctas</span><br><span class="line">. . . . . . . . . . . . . . .&gt; ;</span><br><span class="line">+------------------+--------------------+-------------------+-------------------+--------------------------+</span><br><span class="line">| student_ctas.id  | student_ctas.name  | student_ctas.sex  | student_ctas.age  | student_ctas.department  |</span><br><span class="line">+------------------+--------------------+-------------------+-------------------+--------------------------+</span><br><span class="line">| 95002            | 刘晨                 | 女                 | 19                | IS                       |</span><br><span class="line">| 95003            | 王敏                 | 女                 | 22                | MA                       |</span><br><span class="line">| 95004            | 张立                 | 男                 | 19                | IS                       |</span><br><span class="line">| 95010            | 孔小涛                | 男                 | 19                | CS                       |</span><br><span class="line">| 95005            | 刘刚                 | 男                 | 18                | MA                       |</span><br><span class="line">| 95006            | 孙庆                 | 男                 | 23                | CS                       |</span><br><span class="line">| 95007            | 易思玲                | 女                 | 19                | MA                       |</span><br><span class="line">| 95008            | 李娜                 | 女                 | 18                | CS                       |</span><br><span class="line">| 95001            | 李勇                 | 男                 | 20                | CS                       |</span><br><span class="line">| 95011            | 包小柏                | 男                 | 18                | MA                       |</span><br><span class="line">| 95009            | 梦圆圆                | 女                 | 18                | MA                       |</span><br><span class="line">+------------------+--------------------+-------------------+-------------------+--------------------------+</span><br><span class="line">11 rows selected (0.445 seconds)</span><br><span class="line">0: jdbc:hive2://hadoop3:10000&gt;</span><br></pre></td></tr></table></figure>

<p><img src="https://images2018.cnblogs.com/blog/1228818/201804/1228818-20180405162052001-528212443.png" alt="img"></p>
<h4 id="（6）复制表结构"><a href="#（6）复制表结构" class="headerlink" title="（6）复制表结构"></a>（6）复制表结构</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">0: jdbc:hive2://hadoop3:10000&gt; create table student_copy like student;</span><br><span class="line">No rows affected (0.217 seconds)</span><br><span class="line">0: jdbc:hive2://hadoop3:10000&gt;</span><br></pre></td></tr></table></figure>

<p>注意：</p>
<p>如果在table的前面没有加external关键字，那么复制出来的新表。无论如何都是内部表<br>如果在table的前面有加external关键字，那么复制出来的新表。无论如何都是外部表</p>
<p><img src="https://images2018.cnblogs.com/blog/1228818/201804/1228818-20180405162246038-1109569199.png" alt="img"></p>
<h2 id="2、查看表"><a href="#2、查看表" class="headerlink" title="2、查看表"></a>2、查看表</h2><h3 id="（1）查看表列表"><a href="#（1）查看表列表" class="headerlink" title="（1）查看表列表"></a>（1）查看表列表</h3><h4 id="查看当前使用的数据库中有哪些表"><a href="#查看当前使用的数据库中有哪些表" class="headerlink" title="查看当前使用的数据库中有哪些表"></a>查看当前使用的数据库中有哪些表</h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">0: jdbc:hive2://hadoop3:10000&gt; show tables;</span><br><span class="line">+<span class="comment">---------------+</span></span><br><span class="line">|   tab_name    |</span><br><span class="line">+<span class="comment">---------------+</span></span><br><span class="line">| student       |</span><br><span class="line">| student_bck   |</span><br><span class="line">| student_copy  |</span><br><span class="line">| student_ctas  |</span><br><span class="line">| student_ext   |</span><br><span class="line">| student_ptn   |</span><br><span class="line">+<span class="comment">---------------+</span></span><br><span class="line">6 rows selected (0.163 seconds)</span><br><span class="line">0: jdbc:hive2://hadoop3:10000&gt;</span><br></pre></td></tr></table></figure>

<h4 id="查看非当前使用的数据库中有哪些表"><a href="#查看非当前使用的数据库中有哪些表" class="headerlink" title="查看非当前使用的数据库中有哪些表"></a>查看非当前使用的数据库中有哪些表</h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">0: jdbc:hive2://hadoop3:10000&gt; show tables in myhive;</span><br><span class="line">+<span class="comment">-----------+</span></span><br><span class="line">| tab_name  |</span><br><span class="line">+<span class="comment">-----------+</span></span><br><span class="line">| student   |</span><br><span class="line">+<span class="comment">-----------+</span></span><br><span class="line">1 row selected (0.144 seconds)</span><br><span class="line">0: jdbc:hive2://hadoop3:10000&gt;</span><br></pre></td></tr></table></figure>

<h4 id="查看数据库中以xxx开头的表"><a href="#查看数据库中以xxx开头的表" class="headerlink" title="查看数据库中以xxx开头的表"></a>查看数据库中以xxx开头的表</h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">0: jdbc:hive2://hadoop3:10000&gt; show tables like 'student_c*';</span><br><span class="line">+<span class="comment">---------------+</span></span><br><span class="line">|   tab_name    |</span><br><span class="line">+<span class="comment">---------------+</span></span><br><span class="line">| student_copy  |</span><br><span class="line">| student_ctas  |</span><br><span class="line">+<span class="comment">---------------+</span></span><br><span class="line">2 rows selected (0.13 seconds)</span><br><span class="line">0: jdbc:hive2://hadoop3:10000&gt;</span><br></pre></td></tr></table></figure>

<h3 id="（2）查看表的详细信息"><a href="#（2）查看表的详细信息" class="headerlink" title="（2）查看表的详细信息"></a>（2）查看表的详细信息</h3><h3 id="查看表的信息"><a href="#查看表的信息" class="headerlink" title="查看表的信息"></a>查看表的信息</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">0: jdbc:hive2://hadoop3:10000&gt; desc student;</span><br><span class="line">+<span class="comment">-------------+------------+----------+</span></span><br><span class="line">|  col_name   | data_type  | <span class="keyword">comment</span>  |</span><br><span class="line">+<span class="comment">-------------+------------+----------+</span></span><br><span class="line">| <span class="keyword">id</span>          | <span class="built_in">int</span>        |          |</span><br><span class="line">| <span class="keyword">name</span>        | <span class="keyword">string</span>     |          |</span><br><span class="line">| sex         | <span class="keyword">string</span>     |          |</span><br><span class="line">| age         | <span class="built_in">int</span>        |          |</span><br><span class="line">| department  | <span class="keyword">string</span>     |          |</span><br><span class="line">+<span class="comment">-------------+------------+----------+</span></span><br><span class="line"><span class="number">5</span> <span class="keyword">rows</span> selected (<span class="number">0.149</span> <span class="keyword">seconds</span>)</span><br><span class="line"><span class="number">0</span>: jdbc:hive2://hadoop3:<span class="number">10000</span>&gt;</span><br></pre></td></tr></table></figure>

<h4 id="查看表的详细信息（格式不友好）"><a href="#查看表的详细信息（格式不友好）" class="headerlink" title="查看表的详细信息（格式不友好）"></a>查看表的详细信息（格式不友好）</h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0: jdbc:hive2://hadoop3:10000&gt; desc extended student;</span><br></pre></td></tr></table></figure>

<p><img src="https://images2018.cnblogs.com/blog/1228818/201804/1228818-20180405163049174-722059489.png" alt="img"></p>
<h4 id="查看表的详细信息（格式友好）"><a href="#查看表的详细信息（格式友好）" class="headerlink" title="查看表的详细信息（格式友好）"></a>查看表的详细信息（格式友好）</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0: jdbc:hive2://hadoop3:10000&gt; desc formatted student;</span><br></pre></td></tr></table></figure>

<p><img src="https://images2018.cnblogs.com/blog/1228818/201804/1228818-20180405163229214-1215954993.png" alt="img"></p>
<h4 id="查看分区信息"><a href="#查看分区信息" class="headerlink" title="查看分区信息"></a>查看分区信息</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0: jdbc:hive2://hadoop3:10000&gt; show partitions student_ptn;</span><br></pre></td></tr></table></figure>

<p><img src="https://images2018.cnblogs.com/blog/1228818/201804/1228818-20180405163334107-2114870049.png" alt="img"></p>
<h3 id="（3）查看表的详细建表语句"><a href="#（3）查看表的详细建表语句" class="headerlink" title="（3）查看表的详细建表语句"></a>（3）查看表的详细建表语句</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0: jdbc:hive2://hadoop3:10000&gt; show create table student_ptn;</span><br></pre></td></tr></table></figure>

<p><img src="https://images2018.cnblogs.com/blog/1228818/201804/1228818-20180405163449651-416776974.png" alt="img"></p>
<h2 id="3、修改表"><a href="#3、修改表" class="headerlink" title="3、修改表"></a>3、修改表</h2><h3 id="（1）修改表名"><a href="#（1）修改表名" class="headerlink" title="（1）修改表名"></a>（1）修改表名</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0: jdbc:hive2://hadoop3:10000&gt; alter table student rename to new_student;</span><br></pre></td></tr></table></figure>

<p><img src="https://images2018.cnblogs.com/blog/1228818/201804/1228818-20180405163823328-646565023.png" alt="img"></p>
<h3 id="（2）修改字段定义"><a href="#（2）修改字段定义" class="headerlink" title="（2）修改字段定义"></a>（2）修改字段定义</h3><h4 id="A-增加一个字段"><a href="#A-增加一个字段" class="headerlink" title="A. 增加一个字段"></a>A. 增加一个字段</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0: jdbc:hive2://hadoop3:10000&gt; alter table new_student add columns (score int);</span><br></pre></td></tr></table></figure>

<p><img src="https://images2018.cnblogs.com/blog/1228818/201804/1228818-20180405164132833-857553391.png" alt="img"></p>
<h4 id="B-修改一个字段的定义"><a href="#B-修改一个字段的定义" class="headerlink" title="B. 修改一个字段的定义"></a>B. 修改一个字段的定义</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0: jdbc:hive2://hadoop3:10000&gt; alter table new_student change name new_name string;</span><br></pre></td></tr></table></figure>

<p><img src="https://images2018.cnblogs.com/blog/1228818/201804/1228818-20180405164318857-437618298.png" alt="img"></p>
<h4 id="C-删除一个字段"><a href="#C-删除一个字段" class="headerlink" title="C. 删除一个字段"></a>C. 删除一个字段</h4><p>不支持</p>
<h4 id="D-替换所有字段"><a href="#D-替换所有字段" class="headerlink" title="D. 替换所有字段"></a>D. 替换所有字段</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0: jdbc:hive2://hadoop3:10000&gt; alter table new_student replace columns (id int, name string, address string);</span><br></pre></td></tr></table></figure>

<p><img src="https://images2018.cnblogs.com/blog/1228818/201804/1228818-20180405164553454-371632555.png" alt="img"></p>
<h3 id="（3）修改分区信息"><a href="#（3）修改分区信息" class="headerlink" title="（3）修改分区信息"></a>（3）修改分区信息</h3><h4 id="A-添加分区"><a href="#A-添加分区" class="headerlink" title="A. 添加分区"></a>A. 添加分区</h4><p>静态分区</p>
<p>　　添加一个</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0: jdbc:hive2://hadoop3:10000&gt; alter table student_ptn add partition(city=&quot;chongqing&quot;);</span><br></pre></td></tr></table></figure>

<p>　　添加多个</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0: jdbc:hive2://hadoop3:10000&gt; alter table student_ptn add partition(city=&quot;chongqing2&quot;) partition(city=&quot;chongqing3&quot;) partition(city=&quot;chongqing4&quot;);</span><br></pre></td></tr></table></figure>

<p>动态分区</p>
<p>先向student_ptn表中插入数据，数据格式如下图</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0: jdbc:hive2://hadoop3:10000&gt; load data local inpath &quot;/home/hadoop/student.txt&quot; into table student_ptn partition(city=&quot;beijing&quot;);</span><br></pre></td></tr></table></figure>

<p><img src="https://images2018.cnblogs.com/blog/1228818/201804/1228818-20180405170132089-387032843.png" alt="img"></p>
<p>现在我把这张表的内容直接插入到另一张表student_ptn_age中，并实现sex为动态分区（不指定到底是哪中性别，让系统自己分配决定）</p>
<p>首先创建student_ptn_age并指定分区为age</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0: jdbc:hive2://hadoop3:10000&gt; create table student_ptn_age(id int,name string,sex string,department string) partitioned by (age int);</span><br></pre></td></tr></table></figure>

<p>从student_ptn表中查询数据并插入student_ptn_age表中</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">0: jdbc:hive2://hadoop3:10000&gt; insert overwrite table student_ptn_age partition(age)</span><br><span class="line">. . . . . . . . . . . . . . .&gt; select id,name,sex,department，age from student_ptn;</span><br><span class="line">WARNING: Hive-on-MR is deprecated in Hive 2 and may not be available in the future versions. Consider using a different execution engine (i.e. spark, tez) or using Hive 1.X releases.</span><br><span class="line">No rows affected (27.905 seconds)</span><br><span class="line">0: jdbc:hive2://hadoop3:10000&gt;</span><br></pre></td></tr></table></figure>

<p><img src="https://images2018.cnblogs.com/blog/1228818/201804/1228818-20180405172637613-1037021873.png" alt="img"></p>
<p><img src="https://images2018.cnblogs.com/blog/1228818/201804/1228818-20180405173022085-1302800258.png" alt="img"></p>
<h4 id="B-修改分区"><a href="#B-修改分区" class="headerlink" title="B. 修改分区"></a>B. 修改分区</h4><p>修改分区，一般来说，都是指修改分区的数据存储目录</p>
<p>在添加分区的时候，直接指定当前分区的数据存储目录</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">0: jdbc:hive2://hadoop3:10000&gt; alter table student_ptn add if not exists partition(city=&apos;beijing&apos;) </span><br><span class="line">. . . . . . . . . . . . . . .&gt; location &apos;/student_ptn_beijing&apos; partition(city=&apos;cc&apos;) location &apos;/student_cc&apos;;</span><br><span class="line">No rows affected (0.306 seconds)</span><br><span class="line">0: jdbc:hive2://hadoop3:10000&gt;</span><br></pre></td></tr></table></figure>

<p>修改已经指定好的分区的数据存储目录</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0: jdbc:hive2://hadoop3:10000&gt; alter table student_ptn partition (city=&apos;beijing&apos;) set location &apos;/student_ptn_beijing&apos;;</span><br></pre></td></tr></table></figure>

<p>此时原先的分区文件夹仍存在，但是在往分区添加数据时，只会添加到新的分区目录</p>
<p><img src="https://images2018.cnblogs.com/blog/1228818/201804/1228818-20180405174224289-1981643823.png" alt="img"></p>
<p><img src="https://images2018.cnblogs.com/blog/1228818/201804/1228818-20180405174337967-1343200403.png" alt="img"></p>
<h4 id="C-删除分区"><a href="#C-删除分区" class="headerlink" title="C. 删除分区"></a>C. 删除分区</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0: jdbc:hive2://hadoop3:10000&gt; alter table student_ptn drop partition (city=&apos;beijing&apos;);</span><br></pre></td></tr></table></figure>

<p><img src="https://images2018.cnblogs.com/blog/1228818/201804/1228818-20180405174611617-1503113488.png" alt="img"></p>
<h2 id="4、删除表"><a href="#4、删除表" class="headerlink" title="4、删除表"></a>4、删除表</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0: jdbc:hive2://hadoop3:10000&gt; drop table new_student;</span><br></pre></td></tr></table></figure>

<p><img src="https://images2018.cnblogs.com/blog/1228818/201804/1228818-20180405174718166-1433538751.png" alt="img"></p>
<h2 id="5、清空表"><a href="#5、清空表" class="headerlink" title="5、清空表"></a>5、清空表</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0: jdbc:hive2://hadoop3:10000&gt; truncate table student_ptn;</span><br></pre></td></tr></table></figure>

<h1 id="其他辅助命令"><a href="#其他辅助命令" class="headerlink" title="其他辅助命令"></a>其他辅助命令</h1><p> <img src="https://images2018.cnblogs.com/blog/1228818/201804/1228818-20180405175841608-959744694.png" alt="img"></p>
<p><img src="https://images2018.cnblogs.com/blog/1228818/201804/1228818-20180405175903108-1636139803.png" alt="img"></p>

    </div>
    
    <div class="post-footer">
        <div>
            
            转载声明：
            商业转载请联系作者获得授权,非商业转载请注明出处 © <a href="https://github.com/wenxinzhang" target="_blank">福星</a>
            
            
        </div>
        <div>
            
        </div>
    </div>
</article>
<div class="article-nav prev-next-wrap clearfix">
    
    <a href="/2019-04-08-Hive学习之路 （八）Hive中文乱码.html" class="pre-post btn btn-default" title='Hive学习之路 （八）Hive中文乱码'>
        <i class="fa fa-angle-left fa-fw"></i><span class="hidden-lg">上一篇</span>
        <span class="hidden-xs">
            Hive学习之路 （八）Hive中文乱码</span>
    </a>
    
    
    <a href="/2019-04-06-Hive学习之路 （六）Hive SQL之数据类型和存储格式.html" class="next-post btn btn-default" title='Hive学习之路 （六）Hive SQL之数据类型和存储格式'>
        <span class="hidden-lg">下一篇</span>
        <span class="hidden-xs">
            Hive学习之路 （六）Hive SQL之数据类型和存储格式</span><i class="fa fa-angle-right fa-fw"></i>
    </a>
    
</div>

<div id="comments">
    

<div id="vcomments" class="valine"></div>
<script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src="/assets/valine.min.js"></script>
<script>
new Valine({
    av: AV,
    el: '#vcomments',
    appId: 'UckE9LEIQ8aoa3MH1Kio27rB-gzGzoHsz',
    appKey: '7HC9xCVYQdshKqFRDmULFm5G',
    placeholder: '说点什么吧',
    notify: false,
    verify: true,
    avatar: 'mm',
    meta: 'nick,mail'.split(','),
    pageSize: '10',
    path: window.location.pathname,
    lang: 'zh-CN'.toLowerCase()
})
</script>


</div>

                </main>
                
                    <aside id="article-toc" role="navigation" class="col-md-4">
    <div class="widget">
        <h3 class="title">
            文章目录
        </h3>
        
        <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#库操作"><span class="toc-text">库操作</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1、创建库"><span class="toc-text">1、创建库</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#语法结构"><span class="toc-text">语法结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#创建库的方式"><span class="toc-text">创建库的方式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#（1）创建普通的数据库"><span class="toc-text">（1）创建普通的数据库</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#（2）创建库的时候检查存与否"><span class="toc-text">（2）创建库的时候检查存与否</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#（3）创建库的时候带注释"><span class="toc-text">（3）创建库的时候带注释</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#（4）创建带属性的库"><span class="toc-text">（4）创建带属性的库</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2、查看库"><span class="toc-text">2、查看库</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#查看库的方式"><span class="toc-text">查看库的方式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#（1）查看有哪些数据库"><span class="toc-text">（1）查看有哪些数据库</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#（2）显示数据库的详细属性信息"><span class="toc-text">（2）显示数据库的详细属性信息</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#（3）查看正在使用哪个库"><span class="toc-text">（3）查看正在使用哪个库</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#（4）查看创建库的详细语句"><span class="toc-text">（4）查看创建库的详细语句</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3、删除库"><span class="toc-text">3、删除库</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#说明"><span class="toc-text">说明</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#示例"><span class="toc-text">示例</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#（1）删除不含表的数据库"><span class="toc-text">（1）删除不含表的数据库</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#（2）删除含有表的数据库"><span class="toc-text">（2）删除含有表的数据库</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4、切换库"><span class="toc-text">4、切换库</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#语法"><span class="toc-text">语法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#示例-1"><span class="toc-text">示例</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#表操作"><span class="toc-text">表操作</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1、创建表"><span class="toc-text">1、创建表</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#语法-1"><span class="toc-text">语法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#示例-2"><span class="toc-text">示例</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#（1）创建默认的内部表"><span class="toc-text">（1）创建默认的内部表</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#（2）外部表"><span class="toc-text">（2）外部表</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#（3）分区表"><span class="toc-text">（3）分区表</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#（4）分桶表"><span class="toc-text">（4）分桶表</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#（5）使用CTAS创建表"><span class="toc-text">（5）使用CTAS创建表</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#（6）复制表结构"><span class="toc-text">（6）复制表结构</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2、查看表"><span class="toc-text">2、查看表</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#（1）查看表列表"><span class="toc-text">（1）查看表列表</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#查看当前使用的数据库中有哪些表"><span class="toc-text">查看当前使用的数据库中有哪些表</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查看非当前使用的数据库中有哪些表"><span class="toc-text">查看非当前使用的数据库中有哪些表</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查看数据库中以xxx开头的表"><span class="toc-text">查看数据库中以xxx开头的表</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#（2）查看表的详细信息"><span class="toc-text">（2）查看表的详细信息</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#查看表的信息"><span class="toc-text">查看表的信息</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#查看表的详细信息（格式不友好）"><span class="toc-text">查看表的详细信息（格式不友好）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查看表的详细信息（格式友好）"><span class="toc-text">查看表的详细信息（格式友好）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查看分区信息"><span class="toc-text">查看分区信息</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#（3）查看表的详细建表语句"><span class="toc-text">（3）查看表的详细建表语句</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3、修改表"><span class="toc-text">3、修改表</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#（1）修改表名"><span class="toc-text">（1）修改表名</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#（2）修改字段定义"><span class="toc-text">（2）修改字段定义</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#A-增加一个字段"><span class="toc-text">A. 增加一个字段</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#B-修改一个字段的定义"><span class="toc-text">B. 修改一个字段的定义</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#C-删除一个字段"><span class="toc-text">C. 删除一个字段</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#D-替换所有字段"><span class="toc-text">D. 替换所有字段</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#（3）修改分区信息"><span class="toc-text">（3）修改分区信息</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#A-添加分区"><span class="toc-text">A. 添加分区</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#B-修改分区"><span class="toc-text">B. 修改分区</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#C-删除分区"><span class="toc-text">C. 删除分区</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4、删除表"><span class="toc-text">4、删除表</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5、清空表"><span class="toc-text">5、清空表</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#其他辅助命令"><span class="toc-text">其他辅助命令</span></a></li></ol>
        
    </div>
</aside>
                
            </div>
        </div>
    </section>
    <footer class="main-footer">
    <div class="container">
        <div class="row">
        </div>
    </div>
</footer>
<a id="back-to-top" class="icon-btn hide">
    <i class="fa fa-chevron-up"></i>
</a>
    <div class="copyright">
    <div class="container">
        <div class="row">
            <div class="col-sm-12">
                <div class="busuanzi">
    
    访问量:
    <strong id="busuanzi_value_site_pv">
        <i class="fa fa-spinner fa-spin"></i>
    </strong>
    &nbsp; | &nbsp;
    访客数:
    <strong id="busuanzi_value_site_uv">
        <i class="fa fa-spinner fa-spin"></i>
    </strong>
    
</div>
            </div>
            <div class="col-sm-12">
                <span>Copyright &copy;
                    2018
                </span> |
                <span>
                    Powered by <a href="//hexo.io" class="copyright-links" target="_blank" rel="nofollow">Hexo</a>
                </span> |
                <span>
                    Theme by <a href="//github.com/shenliyang/hexo-theme-snippet.git" class="copyright-links" target="_blank" rel="nofollow">Snippet</a>
                </span>
            </div>
        </div>
    </div>
</div>



<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

<script src="/js/app.js?rev=@@hash"></script>
<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"log":false,"model":{"jsonPath":"/live2dw/assets/z16.model.json"},"display":{"position":"right","width":200,"height":350},"mobile":{"show":true}});</script></body>
</html>